<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="BabylonML Contributors">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Scene (`<bml-scene>`) - BabylonML Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">BabylonML Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Core Concepts</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Scene (`<bml-scene>`)</a>
</li>
                                    
<li>
    <a href="../entity/" class="dropdown-item">Entity (`<bml-entity>`)</a>
</li>
                                    
<li>
    <a href="../components/" class="dropdown-item">Components</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Components Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../components/position/" class="dropdown-item">Position</a>
</li>
                                    
<li>
    <a href="../../components/rotation/" class="dropdown-item">Rotation</a>
</li>
                                    
<li>
    <a href="../../components/scale/" class="dropdown-item">Scale</a>
</li>
                                    
<li>
    <a href="../../components/geometry/" class="dropdown-item">Geometry</a>
</li>
                                    
<li>
    <a href="../../components/material/" class="dropdown-item">Material</a>
</li>
                                    
<li>
    <a href="../../components/camera/" class="dropdown-item">Camera</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../examples/" class="nav-link">Live Examples</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../../getting-started/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../entity/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#core-concepts-bml-scene" class="nav-link">Core Concepts: &lt;bml-scene&gt;</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#purpose" class="nav-link">Purpose</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#basic-usage" class="nav-link">Basic Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#default-camera-and-light" class="nav-link">Default Camera and Light</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#styling" class="nav-link">Styling</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#attributes" class="nav-link">Attributes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#events" class="nav-link">Events</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#internal-details" class="nav-link">Internal Details</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="core-concepts-bml-scene">Core Concepts: <code>&lt;bml-scene&gt;</code></h1>
<p>The <code>&lt;bml-scene&gt;</code> element is the heart of any BabylonML application. It acts as the root container for your 3D world and handles the initialization of the underlying Babylon.js engine and scene.</p>
<h2 id="purpose">Purpose</h2>
<ul>
<li><strong>Initializes Babylon.js:</strong> Automatically creates the <code>Engine</code> and <code>Scene</code> objects required by Babylon.js.</li>
<li><strong>Creates a Canvas:</strong> If no <code>&lt;canvas&gt;</code> element is found inside <code>&lt;bml-scene&gt;</code>, it will create one automatically to render the scene.</li>
<li><strong>Provides Defaults:</strong> Sets up a default camera and a default light source if none are explicitly defined within the scene, making it easy to get something visible quickly.</li>
<li><strong>Manages Scene Lifecycle:</strong> Starts the Babylon.js render loop to continuously draw the scene.</li>
<li><strong>Entity Management:</strong> Uses a <code>MutationObserver</code> to detect when <code>&lt;bml-entity&gt;</code> elements are added or removed, managing their corresponding Babylon.js nodes.</li>
<li><strong>Provides Context:</strong> Makes the Babylon.js <code>Scene</code> object available to descendant <code>&lt;bml-entity&gt;</code> elements and their components.</li>
</ul>
<h2 id="basic-usage">Basic Usage</h2>
<pre><code class="language-html">&lt;bml-scene&gt;
  &lt;!-- Entities go here --&gt;
  &lt;bml-entity geometry=&quot;type: box&quot;&gt;&lt;/bml-entity&gt;
&lt;/bml-scene&gt;
</code></pre>
<p>This minimal example will:
1.  Create a Babylon.js Engine and Scene.
2.  Create a <code>&lt;canvas&gt;</code> element filling the <code>&lt;bml-scene&gt;</code> container.
3.  Add a default camera (a <code>FreeCamera</code>).
4.  Add a default light (a <code>HemisphericLight</code>).
5.  Start rendering the scene (which will initially contain the box entity).</p>
<h2 id="default-camera-and-light">Default Camera and Light</h2>
<p>To make it easy to get started, <code>&lt;bml-scene&gt;</code> automatically creates a default camera and light source under specific conditions:</p>
<ul>
<li><strong>Default Camera:</strong> If no element within the <code>&lt;bml-scene&gt;</code> has a <code>camera</code> attribute (e.g., <code>&lt;bml-entity camera="..."&gt;</code>), a <code>BABYLON.FreeCamera</code> named <code>default_camera</code> is created. It's positioned at <code>(0, 1.6, -5)</code> and has mouse/touch controls attached to the canvas.</li>
<li><strong>Default Light:</strong> If no element within the <code>&lt;bml-scene&gt;</code> has a <code>light</code> attribute (e.g., <code>&lt;bml-entity light="..."&gt;</code>), a <code>BABYLON.HemisphericLight</code> named <code>default_light</code> is created, providing basic ambient illumination from above.</li>
</ul>
<p><strong>Overriding Defaults:</strong></p>
<ul>
<li>If you add <em>any</em> element with a <code>camera</code> attribute, the default camera will <strong>not</strong> be created. You are then responsible for defining your own camera(s) using the <a href="../../components/camera/">camera component</a>.</li>
<li>If you add <em>any</em> element with a <code>light</code> attribute, the default light will <strong>not</strong> be created.<ul>
<li><strong>Important Note:</strong> As of the current version, there is no built-in <code>light</code> component. Adding a <code>light</code> attribute <em>only</em> prevents the default light; it does not automatically create a new light source based on the attribute value. To add specific lights (PointLight, SpotLight, etc.), you currently need to use custom JavaScript that interacts with the Babylon.js scene (e.g., within the <code>bml-scene-ready</code> event). A dedicated <code>light</code> component is planned for future development.</li>
</ul>
</li>
</ul>
<h2 id="styling">Styling</h2>
<p>It's crucial to give <code>&lt;bml-scene&gt;</code> dimensions using CSS, otherwise the canvas might not be visible or have zero size. A common approach is to make it fill the viewport:</p>
<pre><code class="language-css">html, body {
  margin: 0;
  padding: 0;
  overflow: hidden; /* Prevent scrollbars */
  height: 100%;
  width: 100%;
}

bml-scene {
  width: 100vw; /* Viewport width */
  height: 100vh; /* Viewport height */
  display: block; /* Ensure it behaves like a block element */
}

/* Optional: Ensure canvas itself doesn't cause layout issues */
canvas {
  display: block;
}
</code></pre>
<h2 id="attributes">Attributes</h2>
<ul>
<li>
<p><strong><code>xr</code></strong>: Enables WebXR support for the scene. This attribute initializes the Babylon.js <code>WebXRDefaultExperience</code> helper, providing a quick way to add VR or AR capabilities.</p>
<ul>
<li><code>xr="vr"</code>: Initializes the scene for Virtual Reality (VR). Requires a VR-capable headset and browser.</li>
<li><code>xr="ar"</code>: Initializes the scene for Augmented Reality (AR). Requires an AR-capable device (usually mobile) and browser, and often requires the page to be served over HTTPS.</li>
<li><code>xr</code> or <code>xr="true"</code>: Initializes a default XR experience, typically VR.</li>
<li>If the attribute is omitted, XR support is disabled.</li>
</ul>
<p><strong>Example:</strong>
```html
<!-- Enable VR mode -->
<bml-scene xr="vr">
  <bml-entity geometry="type: box" position="0 1 -3"></bml-entity>
</bml-scene></p>
<p><!-- Enable AR mode -->
<bml-scene xr="ar">
  <bml-entity geometry="type: sphere" position="0 1 -2"></bml-entity>
</bml-scene>
```
<strong>Note:</strong> WebXR support is dependent on the user's browser and hardware capabilities. The framework will attempt to initialize the requested mode, but it may fail if the requirements are not met. Check the browser console for messages regarding XR initialization status.</p>
<ul>
<li><strong>Live VR Example:</strong> <a href="https://bayblonml-frontend.netlify.app/examples/vr_scene.html">View VR Scene</a></li>
<li><strong>Live AR Example:</strong> <a href="https://bayblonml-frontend.netlify.app/examples/ar_scene.html">View AR Scene</a> (Requires compatible device/browser)</li>
</ul>
</li>
</ul>
<h2 id="events">Events</h2>
<ul>
<li>
<p><strong><code>bml-scene-ready</code>:</strong> Fired when the Babylon.js Engine and Scene have been initialized, the default camera/light (if needed) are set up, and the render loop has started. The event <code>detail</code> contains references to the Babylon.js <code>scene</code> and <code>engine</code>.</p>
<p><code>javascript
const sceneEl = document.querySelector('bml-scene');
sceneEl.addEventListener('bml-scene-ready', (event) =&gt; {
  console.log('Scene is ready!', event.detail);
  const babylonScene = event.detail.scene;
  const babylonEngine = event.detail.engine;
  // You can now interact with the Babylon.js objects directly
});</code></p>
</li>
</ul>
<h2 id="internal-details">Internal Details</h2>
<ul>
<li>The <code>&lt;bml-scene&gt;</code> element creates and manages instances of <code>BABYLON.Engine</code> and <code>BABYLON.Scene</code>.</li>
<li>It uses a <code>MutationObserver</code> to watch for changes to its direct children and descendants to manage <code>&lt;bml-entity&gt;</code> lifecycles.</li>
</ul></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
