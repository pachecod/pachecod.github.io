<!DOCTYPE html>
<html lang="en" data-bs-theme="light">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        <meta name="author" content="BabylonML Contributors">
        
        <link rel="shortcut icon" href="../../img/favicon.ico">
        <title>Entity (`<bml-entity>`) - BabylonML Documentation</title>
        <link href="../../css/bootstrap.min.css" rel="stylesheet">
        <link href="../../css/fontawesome.min.css" rel="stylesheet">
        <link href="../../css/brands.min.css" rel="stylesheet">
        <link href="../../css/solid.min.css" rel="stylesheet">
        <link href="../../css/v4-font-face.min.css" rel="stylesheet">
        <link href="../../css/base.css" rel="stylesheet">
        <link id="hljs-light" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" >
        <link id="hljs-dark" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github-dark.min.css" disabled>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
        <script>hljs.highlightAll();</script> 
    </head>

    <body>
        <div class="navbar fixed-top navbar-expand-lg navbar-dark bg-primary">
            <div class="container">
                <a class="navbar-brand" href="../..">BabylonML Documentation</a>
                <!-- Expander button -->
                <button type="button" class="navbar-toggler" data-bs-toggle="collapse" data-bs-target="#navbar-collapse" aria-controls="navbar-collapse" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>

                <!-- Expanded navigation -->
                <div id="navbar-collapse" class="navbar-collapse collapse">
                        <!-- Main navigation -->
                        <ul class="nav navbar-nav">
                            <li class="nav-item">
                                <a href="../.." class="nav-link">Home</a>
                            </li>
                            <li class="nav-item">
                                <a href="../../getting-started/" class="nav-link">Getting Started</a>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle active" aria-current="page" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Core Concepts</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../scene/" class="dropdown-item">Scene (`<bml-scene>`)</a>
</li>
                                    
<li>
    <a href="./" class="dropdown-item active" aria-current="page">Entity (`<bml-entity>`)</a>
</li>
                                    
<li>
    <a href="../components/" class="dropdown-item">Components</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item dropdown">
                                <a href="#" class="nav-link dropdown-toggle" role="button" data-bs-toggle="dropdown"  aria-expanded="false">Components Reference</a>
                                <ul class="dropdown-menu">
                                    
<li>
    <a href="../../components/position/" class="dropdown-item">Position</a>
</li>
                                    
<li>
    <a href="../../components/rotation/" class="dropdown-item">Rotation</a>
</li>
                                    
<li>
    <a href="../../components/scale/" class="dropdown-item">Scale</a>
</li>
                                    
<li>
    <a href="../../components/geometry/" class="dropdown-item">Geometry</a>
</li>
                                    
<li>
    <a href="../../components/material/" class="dropdown-item">Material</a>
</li>
                                    
<li>
    <a href="../../components/camera/" class="dropdown-item">Camera</a>
</li>
                                </ul>
                            </li>
                            <li class="nav-item">
                                <a href="../../examples/" class="nav-link">Live Examples</a>
                            </li>
                        </ul>

                    <ul class="nav navbar-nav ms-md-auto">
                        <li class="nav-item">
                            <a href="#" class="nav-link" data-bs-toggle="modal" data-bs-target="#mkdocs_search_modal">
                                <i class="fa fa-search"></i> Search
                            </a>
                        </li>
                            <li class="nav-item">
                                <a rel="prev" href="../scene/" class="nav-link">
                                    <i class="fa fa-arrow-left"></i> Previous
                                </a>
                            </li>
                            <li class="nav-item">
                                <a rel="next" href="../components/" class="nav-link">
                                    Next <i class="fa fa-arrow-right"></i>
                                </a>
                            </li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="container">
            <div class="row">
                    <div class="col-md-3"><div class="navbar-expand-md bs-sidebar hidden-print affix" role="complementary">
    <div class="navbar-header">
        <button type="button" class="navbar-toggler collapsed" data-bs-toggle="collapse" data-bs-target="#toc-collapse" title="Table of Contents">
            <span class="fa fa-angle-down"></span>
        </button>
    </div>

    
    <div id="toc-collapse" class="navbar-collapse collapse card bg-body-tertiary">
        <ul class="nav flex-column">
            
            <li class="nav-item" data-bs-level="1"><a href="#core-concepts-bml-entity" class="nav-link">Core Concepts: &lt;bml-entity&gt;</a>
              <ul class="nav flex-column">
            <li class="nav-item" data-bs-level="2"><a href="#purpose" class="nav-link">Purpose</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#basic-usage" class="nav-link">Basic Usage</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#components" class="nav-link">Components</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#lifecycle-callbacks-internal" class="nav-link">Lifecycle Callbacks (Internal)</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#observedattributes" class="nav-link">observedAttributes</a>
              <ul class="nav flex-column">
              </ul>
            </li>
            <li class="nav-item" data-bs-level="2"><a href="#accessing-the-babylonjs-node" class="nav-link">Accessing the Babylon.js Node</a>
              <ul class="nav flex-column">
              </ul>
            </li>
              </ul>
            </li>
        </ul>
    </div>
</div></div>
                    <div class="col-md-9" role="main">

<h1 id="core-concepts-bml-entity">Core Concepts: <code>&lt;bml-entity&gt;</code></h1>
<p>The <code>&lt;bml-entity&gt;</code> element is the fundamental building block for objects within your BabylonML scene. It represents a node in the 3D scene graph and serves as a container for components that define its appearance, position, and behavior.</p>
<h2 id="purpose">Purpose</h2>
<ul>
<li><strong>Scene Graph Node:</strong> Each <code>&lt;bml-entity&gt;</code> corresponds to a <code>BABYLON.TransformNode</code> in the underlying Babylon.js scene graph by default. A <code>TransformNode</code> is a lightweight node primarily used for positioning, rotating, and scaling.</li>
<li><strong>Component Host:</strong> Entities don't do much on their own. Their functionality comes from attaching <em>components</em> via HTML attributes (e.g., <code>position</code>, <code>geometry</code>, <code>material</code>).</li>
<li><strong>Hierarchy:</strong> Entities can be nested inside other entities to create parent-child relationships, mirroring the scene graph structure. Transformations (position, rotation, scale) applied to a parent entity affect its children.</li>
<li><strong>Lifecycle Management:</strong> The <code>&lt;bml-entity&gt;</code> custom element manages the creation, update, and disposal of its corresponding Babylon.js node and attached components when the element is added to, modified within, or removed from the DOM.</li>
</ul>
<h2 id="basic-usage">Basic Usage</h2>
<pre><code class="language-html">&lt;bml-scene&gt;
  &lt;!-- An entity with position, geometry, and material components --&gt;
  &lt;bml-entity
    id=&quot;my-sphere&quot;
    position=&quot;1 0.5 -2&quot;
    geometry=&quot;type: sphere; diameter: 1&quot;
    material=&quot;type: standard; diffuseColor: blue&quot;&gt;
  &lt;/bml-entity&gt;

  &lt;!-- An empty entity acting as a parent/group --&gt;
  &lt;bml-entity id=&quot;pivot-point&quot; position=&quot;0 2 0&quot; rotation=&quot;0 30 0&quot;&gt;
    &lt;!-- A child entity, its position is relative to the parent --&gt;
    &lt;bml-entity
      id=&quot;child-box&quot;
      position=&quot;1 0 0&quot;
      geometry=&quot;type: box; size: 0.5&quot;
      material=&quot;type: standard; diffuseColor: green&quot;&gt;
    &lt;/bml-entity&gt;
  &lt;/bml-entity&gt;
&lt;/bml-scene&gt;
</code></pre>
<h2 id="components">Components</h2>
<p>Components are defined using attributes on the <code>&lt;bml-entity&gt;</code> tag. The framework parses these attributes and manages the underlying Babylon.js logic.</p>
<ul>
<li><strong>Attribute Syntax:</strong> Components typically use a key-value string format, separated by semicolons (<code>;</code>) and colons (<code>:</code>). Example: <code>position="x: 1; y: 2; z: 3"</code> or <code>material="type: standard; diffuseColor: #FF0000"</code>. The specific properties depend on the component. See the Component Reference section for details on each component.</li>
<li><strong>Dynamic Updates:</strong> Changing an observed attribute on the <code>&lt;bml-entity&gt;</code> element in the DOM (e.g., via JavaScript <code>setAttribute</code>) will trigger the corresponding component's <code>update</code> logic.</li>
</ul>
<h2 id="lifecycle-callbacks-internal">Lifecycle Callbacks (Internal)</h2>
<p>The <code>BmlEntity</code> custom element uses standard lifecycle callbacks:</p>
<ul>
<li><strong><code>connectedCallback()</code>:</strong> Called when the entity is added to the DOM. This is where the Babylon.js <code>TransformNode</code> is created, parented correctly in the scene graph, and initial components are initialized based on existing attributes.</li>
<li><strong><code>disconnectedCallback()</code>:</strong> Called when the entity is removed from the DOM. This triggers the removal of all attached components and the disposal of the corresponding Babylon.js node, cleaning up resources.</li>
<li><strong><code>attributeChangedCallback(name, oldValue, newValue)</code>:</strong> Called when an attribute listed in <code>observedAttributes</code> changes. This delegates the update logic to the <code>ComponentManager</code>, which finds the relevant component and calls its <code>update</code> method.</li>
</ul>
<h2 id="observedattributes"><code>observedAttributes</code></h2>
<p>For <code>attributeChangedCallback</code> to function, the custom element must define which attributes it cares about. <code>BmlEntity</code> dynamically gets this list from the <code>ComponentManager</code>, ensuring that any registered component attribute will trigger updates when changed. The <code>id</code> attribute is also always observed.</p>
<h2 id="accessing-the-babylonjs-node">Accessing the Babylon.js Node</h2>
<p>While the goal of BabylonML is to abstract away direct Babylon.js interaction, you can access the underlying node if needed:</p>
<pre><code class="language-javascript">const entityElement = document.getElementById('my-sphere');
if (entityElement &amp;&amp; entityElement.babylonNode) {
  const transformNode = entityElement.babylonNode;
  // Interact with the Babylon.js TransformNode directly
  // transformNode.scaling.y = 2;
}
</code></pre>
<p><strong>Note:</strong> Some components, like <code>geometry</code>, might create a <code>Mesh</code> instead of just using the default <code>TransformNode</code>. The <code>babylonNode</code> property might reference this <code>Mesh</code>, or the <code>Mesh</code> might be a child of the entity's main <code>TransformNode</code>. Check the specific component documentation for details. Currently, the geometry mesh is created as a child of the entity's <code>TransformNode</code>.</p></div>
            </div>
        </div>

        <footer class="col-md-12">
            <hr>
            <p>Documentation built with <a href="https://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script src="../../js/bootstrap.bundle.min.js"></script>
        <script>
            var base_url = "../..",
                shortcuts = {"help": 191, "next": 78, "previous": 80, "search": 83};
        </script>
        <script src="../../js/base.js"></script>
        <script src="../../search/main.js"></script>

        <div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="searchModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="searchModalLabel">Search</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <p>From here you can search these documents. Enter your search terms below.</p>
                <form>
                    <div class="form-group">
                        <input type="search" class="form-control" placeholder="Search..." id="mkdocs-search-query" title="Type search term here">
                    </div>
                </form>
                <div id="mkdocs-search-results" data-no-results-text="No results found"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div><div class="modal" id="mkdocs_keyboard_modal" tabindex="-1" role="dialog" aria-labelledby="keyboardModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="keyboardModalLabel">Keyboard Shortcuts</h4>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <table class="table">
                <thead>
                  <tr>
                    <th style="width: 20%;">Keys</th>
                    <th>Action</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="help shortcut"><kbd>?</kbd></td>
                    <td>Open this help</td>
                  </tr>
                  <tr>
                    <td class="next shortcut"><kbd>n</kbd></td>
                    <td>Next page</td>
                  </tr>
                  <tr>
                    <td class="prev shortcut"><kbd>p</kbd></td>
                    <td>Previous page</td>
                  </tr>
                  <tr>
                    <td class="search shortcut"><kbd>s</kbd></td>
                    <td>Search</td>
                  </tr>
                </tbody>
              </table>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
